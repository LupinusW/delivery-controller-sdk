<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>about_Broker_RemotePC - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "about_Broker_RemotePC";
    var mkdocs_page_input_path = "Broker/about_Broker_RemotePC.md";
    var mkdocs_page_url = "/Broker/about_Broker_RemotePC/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#topic">TOPIC</a></li>
        
    
        <li class="main "><a href="#short-description">SHORT DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#long-description">LONG DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#machines-and-catalogs">MACHINES AND CATALOGS</a></li>
        
    
        <li class="main "><a href="#catalogs-and-desktop-groups">CATALOGS AND DESKTOP GROUPS</a></li>
        
    
        <li class="main "><a href="#desktop-groups-assignment-policy-rules-and-users">DESKTOP GROUPS, ASSIGNMENT POLICY RULES, AND USERS</a></li>
        
    
        <li class="main "><a href="#example">EXAMPLE</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Broker &raquo;</li>
        
      
    
    <li>about_Broker_RemotePC</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# about_Broker_RemotePC</p>
<h2 id="topic"><a class="toclink" href="#topic">TOPIC</a></h2>
<div class="codehilite"><pre><span></span>Citrix Broker SDK - RemotePC
</pre></div>


<h2 id="short-description"><a class="toclink" href="#short-description">SHORT DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>Overview of the Remote PC feature.
</pre></div>


<h2 id="long-description"><a class="toclink" href="#long-description">LONG DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>Remote PC allows automatic publishing of a user&#39;s physical desktop within 
a XenDesktop site, so that it can be accessed remotely. The configuration of 
Remote PC within the Citrix Broker service specifies the rules and 
relationships that allow the machine to successfully register with a 
controller in the site, and be made available for the user to start remote 
sessions.

When Remote PC is configured, there are two steps required for publishing a 
machine as a Remote PC desktop.

First a VDA must be installed on the machine and it must be configured such 
that it registers with a controller in a site.

Second, a user must log on to the machine. When the Citrix Broker service 
detects an active console session for a user, it assigns the user to the 
machine and publishes it in a Remote PC desktop group.

Remote PC configuration consists of defining relationships between:

  o Machines and catalogs 
  o Catalogs and desktop groups 
  o Desktop groups and assignment policy rules 
  o Assignment policy rules and users

The Citrix Broker service automates the assignment of Remote PC machines to 
users in two stages. The first stage automatically imports matching 
unconfigured machines into the site:

  o Suitable machines are automatically added to a Remote PC catalog. 
  o The machines are temporarily configured to be in one of the Remote PC 
    desktop groups associated with the catalog.

When a suitable user logs on to the console of the machine, the second stage 
of the automatic configuration is performed:

  o The machine is configured to be in the desktop group that is 
    appropriate for the user. 
  o The machine is assigned to the user that has logged on. 
  o The machine desktop is made available to the user remotely, configured 
    to appear as the machine hostname.

Catalogs and desktop groups can be marked as participating in RemotePC 
automation with the &#39;IsRemotePC&#39; property, but this property can only be set 
to true if various other properties of the catalog or desktop group are 
appropriate. Catalogs must be single-sessioned and contain physical 
machines. Desktop Groups must be single session, configured to deliver 
private assigned machines, delivering desktop sessions only.

Catalogs and desktop groups can have the &#39;IsRemotePC&#39; property cleared to 
remove them from the RemotePC automation, but only when all RemotePC 
associations relating to them through RemotePCAccounts and catalog/group 
relationships have first been removed.
</pre></div>


<h2 id="machines-and-catalogs"><a class="toclink" href="#machines-and-catalogs">MACHINES AND CATALOGS</a></h2>
<div class="codehilite"><pre><span></span>Mappings are defined between machines and Remote PC catalogs through the 
RemotePCAccount cmdlets.

The machine to catalog mappings support the automated addition of machines 
to catalogs.
</pre></div>


<p>PROPERTIES 
    RemotePCAccounts expose sets of included and excluded machine name filters 
    specified in DOMAIN\MACHINE format. A MachinesIncluded or MachinesExcluded 
    entry can include asterisk wildcards to generalize matches. </p>
<div class="codehilite"><pre><span></span>Each RemotePCAccount can specify the Distinguished Name (DN) of an AD 
container in addition to the machine name filters, in the RemotePCAccount 
Organisational Unit (OU) property, and this limits the machines that the 
account objects act on to those that reside at or below that container in 
the AD domain hierarchy. An AllowSubfolderMatches setting on the 
RemotePCAccount indicates whether the computer must exist directly within 
the container to trigger a match, or whether it can be in a child below 
the defined container in the AD hierarchy.

Note that the AD container component is optional and a special value of 
&#39;any&#39; can be supplied in the OU field to permit the RemotePCAccount to 
automatically match regardless of the AD machine object location in the AD 
domain hierarchy. A match is still subject to machine name filtering.

The last component of the RemotePCAccount is the CatalogUid. This indicates 
which catalog the Remote PC automation should move the machine into when a 
match is found.
</pre></div>


<p>CONSTRAINTS 
    The IsRemotePC setting must be enabled on catalogs before they can be 
    specified in a RemotePCAccount. </p>
<div class="codehilite"><pre><span></span>There can be any number of RemotePCAccounts configured in the site as long 
as each specifies a unique OU. There can be only one RemotePCAccount with 
the &#39;any&#39; OU.
</pre></div>


<p>AUTOMATION 
    When a machine matching the criteria set up in a RemotePCAccount instance 
    registers with one of the brokers in the site, it is automatically added 
    to the catalog defined by the RemotePCAccount. This can take up to 30 
    seconds to happen after the machine registers. </p>
<div class="codehilite"><pre><span></span>When the machine registration occurs, the machine details can match more 
than one RemotePCAccount instance, but the machine can only be placed into 
one catalog, so one RemotePCAccount instance is chosen from the list that 
best matches the machine. This choice is made according to the length in 
nodes of the DN of the AD container specification associated with the 
RemotePCAccount, so more specific child OUs override specifications for 
their parent OUs if both are present. The RemotePCAccount for the &#39;any&#39; OU 
is always last and  used only if no other instances match.

A Windows eventlog message is generated when an automated catalog assignment 
is performed.
</pre></div>


<p>NOTES 
    The AD distinguished name for the container is checked when the 
    RemotePCAccount is created, but if the container is subsequently moved or 
    deleted, the site does not automatically accommodate this, and the 
    RemotePCAccount must be changed or removed manually. </p>
<div class="codehilite"><pre><span></span>Related Cmdlets 
--------------- 
  o New-BrokerRemotePCAccount 
  o Get-BrokerRemotePCAccount 
  o Set-BrokerRemotePCAccount 
  o Remove-BrokerRemotePCAccount 
  o New-BrokerCatalog [-IsRemotePC &lt;Boolean&gt;] 
  o Set-BrokerCatalog [-IsRemotePC &lt;Boolean&gt;]
</pre></div>


<h2 id="catalogs-and-desktop-groups"><a class="toclink" href="#catalogs-and-desktop-groups">CATALOGS AND DESKTOP GROUPS</a></h2>
<div class="codehilite"><pre><span></span>A Remote PC catalog may be associated with one or more Remote PC desktop 
groups. The catalog to desktop group associations support automated 
publishing of machines to users.
</pre></div>


<p>USAGE 
    An association is formed via: 
      Add-BrokerDesktopGroup -RemotePCCatalog <Catalog> [-Priority <Int32>] </p>
<div class="codehilite"><pre><span></span>An association is broken via: 
  Remove-BrokerDesktopGroup -RemotePCCatalog &lt;Catalog&gt;

To find associated desktop groups: 
  Get-BrokerDesktopGroup -RemotePCCatalogUid &lt;Int32&gt;
</pre></div>


<p>AUTOMATION 
    When a machine in a Remote PC catalog is not already assigned to a user, 
    Remote PC automation temporarily places the machine in one of the desktop 
    groups associated with the catalog. The temporary placing of the machine 
    in a group will be adjusted as needed when the machine assignment to a 
    user is first made. </p>
<div class="codehilite"><pre><span></span>The desktop group chosen as the temporary home for a machine is according 
to the priority value supplied when making the association between the 
group and the catalog. The group with the highest priority (lowest 
numerical priority value) is chosen.

A Windows eventlog message is generated when an automated machine 
assignment is performed.
</pre></div>


<p>PRIORITY 
    Each desktop group to catalog association has a priority value that can 
    be specified when the association is made or defaults to lower than the 
    lowest existing association priority (highest numerical value) or zero if 
    no other association exists yet. The lower the priority numerical value, 
    the higher the priority level. The priority value for the association is 
    used to choose the temporary desktop group to place a new RemotePC machine 
    in when it first registers. It is also used to decide which group to 
    finally place the machine in when the user that the machine is being 
    assigned to is appropriate for more than one of the associated desktop 
    groups, usually because the desktop groups are using AD security groups 
    for the user associations with the desktop groups. </p>
<div class="codehilite"><pre><span></span>The priority values for each association between a desktop group and a 
catalog are automatically maintained as unique for each catalog, and 
priorities can be adjusted up or down accordingly by the system. The last 
association created without a specified priority is always arranged to 
have the least priority (the highest numerical priority value).
</pre></div>


<p>NOTES 
    The temporary placement of the machines in a desktop group is not 
    re-evaluated if settings change after the automatic placement. </p>
<p>RELATED CMDLETS 
      o Add-BrokerDesktopGroup -RemotePCCatalog <Catalog> 
      o Remove-BrokerDesktopGroup [-RemotePCCatalog <Catalog>] 
      o Get-BrokerDesktopGroup [-RemotePCCatalogUid <Int32>] 
      o New-BrokerCatalog [-IsRemotePC <Boolean>] 
      o Set-BrokerCatalog [-IsRemotePC <Boolean>] 
      o New-BrokerDesktopGroup [-IsRemotePC <Boolean>] 
      o Set-BrokerDesktopGroup [-IsRemotePC <Boolean>] </p>
<h2 id="desktop-groups-assignment-policy-rules-and-users"><a class="toclink" href="#desktop-groups-assignment-policy-rules-and-users">DESKTOP GROUPS, ASSIGNMENT POLICY RULES, AND USERS</a></h2>
<div class="codehilite"><pre><span></span>Assignment policy rules are used to define sets of users allowed to be 
assigned to machines by Remote PC automation, and to determine which 
desktop group the machine is placed in when the user assignment is made.
</pre></div>


<p>AUTOMATION 
    A machine is automatically assigned to a user when the Citrix Broker 
    service sees that the user has logged on to a RemotePC machine, and the 
    user is amongst those configured in the desktop group assignment policy 
    rule. If this is the first assignment of a user to a machine, all the 
    assignment policy rules for all groups associated with the machine are 
    checked, and the machine can be moved to a different, more appropriate 
    desktop group if needed. </p>
<div class="codehilite"><pre><span></span>A Windows eventlog message is generated when an automated assignment of a 
machine to a user is made.
</pre></div>


<p>MULTIPLE ASSIGNMENTS 
    By default, multiple automatic assignments of users to the same machine 
    can be established if multiple users log on to the RemotePC machine, but 
    this can be disabled if desired using a registry setting (see CTX137805). </p>
<p>NOTES 
    User to machine assignments can still be made and removed manually through 
    the Powershell SDK for machines in Remote PC catalogs and desktop groups. </p>
<div class="codehilite"><pre><span></span>The automatic placement of a machine in an appropriate desktop group 
happens when the first automatic assignment of a user to the machine is 
made, and this placement will not be automatically updated if the 
configuration subsequently changes.

Only a single assignment policy rule is allowed for each RemotePC desktop 
group.
</pre></div>


<p>RELATED CMDLETS 
      o New-BrokerUser 
      o New-BrokerAssignmentPolicyRule 
      o Set-BrokerAssignmentPolicyRule </p>
<h2 id="example"><a class="toclink" href="#example">EXAMPLE</a></h2>
<div class="codehilite"><pre><span></span><span class="x">The following example creates a simple configuration that allows any user </span>
<span class="x">and machine in the current AD domain to participate in RemotePC.</span>

<span class="err">#</span><span class="x"> Create a Remote PC catalog </span>
<span class="p">$</span><span class="nv">catalog</span><span class="x"> = New-BrokerCatalog -IsRemotePC </span><span class="p">$</span><span class="nv">true</span><span class="x"> </span>
<span class="x">                             -SessionSupport SingleSession </span>
<span class="x">                             -MachinesArePhysical </span><span class="p">$</span><span class="nv">true</span><span class="x"> </span>
<span class="x">                             -AllocationType Static </span>
<span class="x">                             -PersistUserChanges OnLocal </span>
<span class="x">                             -ProvisioningType Manual </span>
<span class="x">                             -Name RemotePCCatalog</span>

<span class="err">#</span><span class="x"> Create a Remote PC desktop group </span>
<span class="p">$</span><span class="nv">dg</span><span class="x"> = New-BrokerDesktopGroup -IsRemotePC </span><span class="p">$</span><span class="nv">true</span><span class="x"> </span>
<span class="x">                             -SessionSupport SingleSession </span>
<span class="x">                             -DeliveryType DesktopsOnly </span>
<span class="x">                             -DesktopKind Private </span>
<span class="x">                             -Name RemotePCDesktopGroup</span>

<span class="err">#</span><span class="x"> Create an assignment policy rule for that desktop group allowing any </span>
<span class="err">#</span><span class="x"> domain user to match. </span>
<span class="x">New-BrokerAssignmentPolicyRule -DesktopGroupUid </span><span class="p">$</span><span class="nv">dg</span><span class="p">.</span><span class="nv">Uid</span><span class="x"> </span>
<span class="x">                               -IncludedUsers &#39;domain users&#39; </span>
<span class="x">                               -Name RemotePCAPR</span>

<span class="err">#</span><span class="x"> Create a RemotePCAccount matching any unconfigured machine, causing the </span>
<span class="err">#</span><span class="x"> machines to be added to the catalog by Remote PC automation. </span>
<span class="x">New-BrokerRemotePCAccount -OU &#39;any&#39; </span>
<span class="x">                          -CatalogUid </span><span class="p">$</span><span class="nv">catalog</span><span class="p">.</span><span class="nv">Uid</span><span class="x"></span>

<span class="err">#</span><span class="x"> Associate the desktop group and catalog to permit domain users to be </span>
<span class="err">#</span><span class="x"> automatically assigned to machines in that catalog </span>
<span class="x">Add-BrokerDesktopGroup </span><span class="p">$</span><span class="nv">dg</span><span class="x"> -RemotePCCatalog </span><span class="p">$</span><span class="nv">catalog</span><span class="x"></span>

<span class="cp">#</span><span class="nf">Create</span><span class="x"> an access policy rule, allowing access to the users to the </span>
<span class="cp">#</span><span class="nf">Remote</span><span class="x"> PC desktop group. </span>
<span class="x">New-BrokerAccessPolicyRule -IncludedUsers &#39;domain users&#39; </span>
<span class="x">                           -DesktopGroupUid </span><span class="p">$</span><span class="nv">dg</span><span class="p">.</span><span class="nv">Uid</span><span class="x"> </span>
<span class="x">                           -IncludedUserFilterEnabled </span><span class="p">$</span><span class="nv">true</span><span class="x"> </span>
<span class="x">                           -Name RemotePCAccessPolicyRule</span>
</pre></div>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../about_Broker_PowerManagement/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../Add-BrokerApplication/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
