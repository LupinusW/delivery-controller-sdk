<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>New-BrokerMachineCommand - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "New-BrokerMachineCommand";
    var mkdocs_page_input_path = "Broker/New-BrokerMachineCommand.md";
    var mkdocs_page_url = "/Broker/New-BrokerMachineCommand/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#syntax">Syntax</a></li>
        
    
        <li class="main "><a href="#detailed-description">Detailed Description</a></li>
        
    
        <li class="main "><a href="#related-commands">Related Commands</a></li>
        
    
        <li class="main "><a href="#parameters">Parameters</a></li>
        
    
        <li class="main "><a href="#input-type">Input Type</a></li>
        
            <li><a href="#none">None</a></li>
        
    
        <li class="main "><a href="#return-values">Return Values</a></li>
        
            <li><a href="#citrixbrokeradminsdkmachinecommand">Citrix.Broker.Admin.SDK.MachineCommand</a></li>
        
    
        <li class="main "><a href="#examples">Examples</a></li>
        
            <li><a href="#example-1">EXAMPLE 1</a></li>
        
            <li><a href="#example-2">EXAMPLE 2</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Broker &raquo;</li>
        
      
    
    <li>New-BrokerMachineCommand</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# New-BrokerMachineCommand</p>
<p>Creates a new command to deliver to a desktop.</p>
<h2 id="syntax"><a class="toclink" href="#syntax">Syntax</a></h2>
<div class="codehilite"><pre><span></span>New-BrokerMachineCommand -User &lt;String&gt; -Category &lt;String&gt; -CommandName &lt;String&gt; [-DesktopGroups &lt;DesktopGroup[]&gt;] [-SendTrigger &lt;MachineCommandTrigger&gt;] [-SendDeadline &lt;TimeSpan&gt;] [-CommandData &lt;Byte[]&gt;] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]

New-BrokerMachineCommand -MachineUid &lt;Int32&gt; -Category &lt;String&gt; -CommandName &lt;String&gt; [-SendTrigger &lt;MachineCommandTrigger&gt;] [-SendDeadline &lt;TimeSpan&gt;] [-CommandData &lt;Byte[]&gt;] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]

New-BrokerMachineCommand -SessionUid &lt;Int64&gt; -Category &lt;String&gt; -CommandName &lt;String&gt; [-SendTrigger &lt;MachineCommandTrigger&gt;] [-SendDeadline &lt;TimeSpan&gt;] [-CommandData &lt;Byte[]&gt;] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]

New-BrokerMachineCommand -Synchronous -MachineUid &lt;Int32&gt; -Category &lt;String&gt; -CommandName &lt;String&gt; [-CommandData &lt;Byte[]&gt;] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]
</pre></div>


<h2 id="detailed-description"><a class="toclink" href="#detailed-description">Detailed Description</a></h2>
<p>Create a new command queued for delivery to a desktop.  Commands are sent to a specific handler installed on the desktop using the Category parameter. Each handler has its own list of commands identified by the CommandName parameter.  Optional command data can be provided using the CommandData parameter in a format specified by the handler.</p>
<p>Commands are targeted at a specific user, session or machine. Commands targeted at a user can be further be restricted to one or more desktop groups.</p>
<p>The SendTrigger is used to restrict the command to a specific event related to the target. For example, when the target machine registers or when the target user reconnects to a session. The command will be sent to the machine when the SendTrigger occurs for the target.</p>
<p>If the Synchronous switch is provided, the target must be a machine and no SendTrigger can be specified. The command is sent immediately to the machine if it is currently registered and fails if the machine is not registered.</p>
<p>Note that the combined length of the Category and CommandName is limited to 64 characters. The Category and CommandName must both be entirely alphanumeric and not include any white space.</p>
<h2 id="related-commands"><a class="toclink" href="#related-commands">Related Commands</a></h2>
<ul>
<li><a href="../Get-BrokerMachineCommand.html">Get-BrokerMachineCommand</a></li>
<li><a href="../Remove-BrokerMachineCommand.html">Remove-BrokerMachineCommand</a></li>
</ul>
<h2 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required?</th>
<th>Pipeline Input</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Category</td>
<td>The service on the desktop to send the command to.</td>
<td>true</td>
<td>true (ByPropertyName)</td>
<td></td>
</tr>
<tr>
<td>CommandName</td>
<td>The name of the command to send (as defined by the service).</td>
<td>true</td>
<td>true (ByPropertyName)</td>
<td></td>
</tr>
<tr>
<td>User</td>
<td>User whose desktop or session should receive the command.</td>
<td>true</td>
<td>true (ByPropertyName)</td>
<td>Any user.</td>
</tr>
<tr>
<td>MachineUid</td>
<td>Specific machine that should receive the command.</td>
<td>true</td>
<td>true (ByPropertyName)</td>
<td></td>
</tr>
<tr>
<td>SessionUid</td>
<td>Currently logged on user session that should receive the command.</td>
<td>true</td>
<td>true (ByPropertyName)</td>
<td>Any session.</td>
</tr>
<tr>
<td>Synchronous</td>
<td>Send the command immediately and block while waiting for the reply.</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>CommandData</td>
<td>Optional additional data to include with the command.</td>
<td>false</td>
<td>true (ByPropertyName)</td>
<td>None</td>
</tr>
<tr>
<td>LoggingId</td>
<td>Specifies the identifier of the high level operation that this cmdlet call forms a part of. Desktop Studio and Desktop Director typically create High Level Operations. PowerShell scripts can also wrap a series of cmdlet calls in a High Level Operation by way of the Start-LogHighLevelOperation and Stop-LogHighLevelOperation cmdlets.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AdminAddress</td>
<td>Specifies the address of a XenDesktop controller that the PowerShell snapin will connect to. This can be provided as a host name or an IP address.</td>
<td>false</td>
<td>false</td>
<td>Localhost. Once a value is provided by any cmdlet, this value will become the default.</td>
</tr>
<tr>
<td>DesktopGroups</td>
<td>Further restrict the command targeted at a user to machines in these desktop groups.</td>
<td>false</td>
<td>true (ByPropertyName)</td>
<td>No restriction by desktop group.</td>
</tr>
<tr>
<td>SendTrigger</td>
<td>Queue command for delivery until this particular event occurs. Valid values are  NextContact, Broker, LogOn, Logoff, Disconnect and Reconnect.</td>
<td>false</td>
<td>true (ByPropertyName)</td>
<td>Default value is 'NextContact' so the command is sent during the next communication with the desktop.</td>
</tr>
<tr>
<td>SendDeadline</td>
<td>Automatically cancel the command if it not delivered before the specified time span passes.</td>
<td>false</td>
<td>true (ByPropertyName)</td>
<td>Command expires after 24 hours.</td>
</tr>
</tbody>
</table>
<h2 id="input-type"><a class="toclink" href="#input-type">Input Type</a></h2>
<h3 id="none"><a class="toclink" href="#none">None</a></h3>
<p>No parameter is accepted from the input pipeline.</p>
<h2 id="return-values"><a class="toclink" href="#return-values">Return Values</a></h2>
<h3 id="citrixbrokeradminsdkmachinecommand"><a class="toclink" href="#citrixbrokeradminsdkmachinecommand">Citrix.Broker.Admin.SDK.MachineCommand</a></h3>
<p>New command that was added to the command queue.### Citrix.Broker.Admin.SDK.MachineSynchronousCommandResponse
   When the Synchronous option is used, the command is immediately sent to the specified machine and processed. The SDK object returned describes the command and the result of this command processing.## Notes
   Commands are subject to delegated administration restrictions based on the desktop group, category and command name.</p>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<h3 id="example-1"><a class="toclink" href="#example-1">EXAMPLE 1</a></h3>
<div class="codehilite"><pre><span></span><span class="x">New-BrokerMachineCommand -Category UserProfileManager -CommandName &quot;ResetUpmProfile&quot; -DesktopGroups 1 -CommandData </span><span class="p">$</span><span class="nv">byteArray</span><span class="x"> -SendTrigger logon -user domain1\user1</span>
</pre></div>


<p>Description<br>-----------<br>Instruct the User Profile Manager service to execute the "ResetUpmProfile" command using the encoded $byteArray command data when user domain1\user1 logs on to any machine in desktop group 1</p>
<h3 id="example-2"><a class="toclink" href="#example-2">EXAMPLE 2</a></h3>
<div class="codehilite"><pre><span></span>New-BrokerMachineCommand -Synchronous -Category &quot;MonitorService&quot; -CommandName &quot;EnableLogging&quot; -MachineUid 13
</pre></div>


<p>Description<br>-----------<br>Instruct the monitor service to immediately execute the "EnableLogging" command on the machine having Uid 13.</p>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../New-BrokerMachine/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../New-BrokerMachineConfiguration/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
