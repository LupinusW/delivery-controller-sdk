<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>about_Broker_Concepts - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "about_Broker_Concepts";
    var mkdocs_page_input_path = "Broker/about_Broker_Concepts.md";
    var mkdocs_page_url = "/Broker/about_Broker_Concepts/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#topic">TOPIC</a></li>
        
    
        <li class="main "><a href="#short-description">SHORT DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#long-description">LONG DESCRIPTION</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Broker &raquo;</li>
        
      
    
    <li>about_Broker_Concepts</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>﻿# about_Broker_Concepts</p>
<h2 id="topic"><a class="toclink" href="#topic">TOPIC</a></h2>
<div class="codehilite"><pre><span></span>Citrix Broker - Concepts
</pre></div>


<h2 id="short-description"><a class="toclink" href="#short-description">SHORT DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>Overview of the Citrix Broker.
</pre></div>


<h2 id="long-description"><a class="toclink" href="#long-description">LONG DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>The Citrix Broker is a Microsoft Windows service running on a delivery 
controller that responds to desktop/application launch requests from users 
through StoreFront by selecting a suitable machine, powering it up if 
necessary, and then returning the address of the selected machine to the 
user&#39;s endpoint system so that a session connection can be made. If required 
for resilience or scale, additional instances of the Broker may be installed 
to run on additional delivery controllers in the same delivery site.

In addition to handling launch requests, the Broker also has background 
responsibilities in the delivery site; these include: maintaining 
appropriate numbers of unused, powered-up machines to avoid unnecessary 
delays to users launching desktops/applications; maintaining periodic 
contact with powered-up machines; and monitoring the state of machines and 
user sessions.

The Citrix.Broker.Admin PowerShell snap-in provides the cmdlets needed to 
administer and monitor the behaviour of the Broker service, either on the 
local system (by default) or on another system (by use of the -AdminAddress 
command-line parameter).

The cmdlets in the broker SDK manage objects in the following broad 
functional areas:
</pre></div>


<p>PROVISIONING CONFIGURATION 
    The Broker must be informed of the machines which are at its disposal. In 
    order to do this, machines are organized in catalogs, created with the 
    New-BrokerCatalog cmdlet; machines are introduced into the system through 
    the use of the New-BrokerMachine cmdlet. </p>
<div class="codehilite"><pre><span></span>Catalogs define the nature of the machines contained within them, such as 
the allocation type (that is, static or random), how the machines are 
actually provisioned (that is, by MCS, PVS or manually), whether they are 
physical or virtual machines, whether they are single-session or 
multi-session, etc.

Typically, machines configured from a provisioning standpoint are not 
associated with specific users (though they may need to be, for example if 
the machine&#39;s disk image was captured from a specific user&#39;s physical 
desktop using a P2V tool); this is normally done when configuring how 
resources are brokered to users, below.

It is also possible for a catalog to be configured to be populated 
automatically with end users’ existing physical machines using the RemotePC 
feature. The about_Broker_RemotePC topic gives more detail.

Provisioning configuration involves the following SDK objects: 
    BrokerHypervisorConnection 
    BrokerCatalog 
    BrokerMachine 
    BrokerRemotePCAccount 
    BrokerUser

For more information, see: 
    Get-Help about_Broker_Machines 
    Get-Help about_Broker_RemotePC 
    Get-Help Get-BrokerHypervisorConnection 
    Get-Help Get-BrokerCatalog 
    Get-Help Get-BrokerMachine 
    Get-Help Get-BrokerUser
</pre></div>


<p>BROKERING CONFIGURATION 
    In order that resources (that is, desktops and applications) can be used in 
    user sessions, the Broker must be configured to connect incoming user launch 
    requests through StoreFront with the correct machine. This is achieved by 
    adding machines to desktop groups. The grouping of machines in desktop 
    groups need not necessarily match the grouping of the machines within the 
    catalogs that were used for the configuration of provisioning. It is through 
    the desktop group that the configuration of which users can use which 
    machine resources is achieved. </p>
<div class="codehilite"><pre><span></span>Configuration of the mapping between resources and end users is achieved 
through a combination of machine assignment and entitlement rules. In 
addition, access to those resources must also be configured (for example, 
some resources could be configured only to be accessible to users when they 
are not connecting remotely through Access Gateway.) 
The about_Broker_Policies topic gives more detail of the rich configuration 
options available.

It is also possible for a desktop group to be configured to be populated 
automatically with end users’ existing physical machines using the RemotePC 
feature. The about_Broker_RemotePC topic gives more detail.

When machines are virtual, the broker can be configured to minimize power 
usage by switching them off when they are not expected to be in use while 
still maintaining good response times for end-user launch requests. This is 
achieved through power policy for desktop groups. This allows separate 
configuration for peak compared to off-peak times of the week of the number 
of machines nominally to be powered up, the number of machines to be powered 
up and idling, in addition to those in use to be used as a &quot;buffer&quot; to 
ensure prompt servicing of user launch requests, and the behavior required 
for virtual machines when users disconnect from their sessions for extended 
periods of time.

It is also possible to issue explicit power commands to machines. The 
about_Broker_PowerManagement topic gives more detail.

Configuration of Brokering involves the following SDK objects: 
    BrokerDesktopGroup 
    BrokerPrivateDesktop 
    BrokerSharedDesktop 
    BrokerRemotePCAccount 
    BrokerPowerTimeScheme 
    BrokerUser 
    BrokerTag 
    BrokerAccessPolicyRule 
    BrokerAssignmentPolicyRule 
    BrokerEntitlementPolicyRule 
    BrokerApplication 
    BrokerApplicationGroup 
    BrokerApplicationInstance 
    BrokerAppAssignmentPolicyRule 
    BrokerAppEntitlementPolicyRule 
    BrokerConfiguredFTA 
    BrokerImportedFTA

For more information, see: 
    Get-Help about_Broker_Desktops 
    Get-Help about_Broker_Policies 
    Get-Help about_Broker_Applications 
    Get-Help about_Broker_RemotePC 
    Get-Help Get-BrokerPrivateDesktop 
    Get-Help Get-BrokerSharedDesktop 
    Get-Help Get-BrokerPowerTimeScheme 
    Get-Help Get-BrokerUser 
    Get-Help Get-BrokerTag 
    Get-Help Get-BrokerAccessPolicyRule 
    Get-Help Get-BrokerAssignmentPolicyRule 
    Get-Help Get-BrokerEntitlementPolicyRule
</pre></div>


<p>MONITORING AND ADMINISTRATION 
    After you have provisioned and configured machines for brokering, use the 
    broker SDK to monitor and administer user sessions and other aspects of the 
    delivery site. </p>
<div class="codehilite"><pre><span></span>Monitoring and administration involve the following SDK objects: 
    BrokerServiceStatus 
    BrokerHypervisorAlert 
    BrokerDesktop 
    BrokerDesktopUsage 
    BrokerHostingPowerAction 
    BrokerSession 
    BrokerSessionMessage

For more information, see: 
    Get-Help about_Broker_Desktops 
    Get-Help Get-BrokerServiceStatus 
    Get-Help Get-BrokerHypervisorAlert 
    Get-Help Get-BrokerDesktop 
    Get-Help Get-BrokerDesktopUsage 
    Get-Help Get-BrokerHostingPowerAction 
    Get-Help Get-BrokerSession 
    Get-Help Send-BrokerSessionMessage
</pre></div>


<p>SITE MANAGEMENT 
    The broker must be configured after installation; this is normally performed 
    automatically by the Citrix Studio console. Configuration tasks include 
    selecting the database (and obtaining the SQL scripting to initialize it), 
    selecting the Citrix Configuration Service that holds the site 
    configuration. </p>
<div class="codehilite"><pre><span></span>Note that some aspects of broker configuration (such as the port number on 
which the broker listens for SDK connections) cannot be configured with 
PowerShell cmdlets. These are configured through the use of the Broker 
Service executable. For more information, see 
about_Broker_PostInstallPreConfiguration.

A further important aspect of site management concerns the way in which 
machines providing resources identify the delivery controllers to which they 
belong. For more information, see about_Broker_ControllerDiscovery.

Managing XenDesktop sites involves the following SDK objects: 
    BrokerSite 
    BrokerController 
    BrokerDBConnection 
    BrokerDBSchema 
    BrokerDBVersionChangeScript 
    BrokerInstalledDbVersion 
    BrokerServiceInstance 
    BrokerServiceGroupMembership 
    BrokerNameCache

For more information, see: 
    Get-Help about_Broker_PostInstallPreConfiguration 
    Get-Help about_Broker_ControllerDiscovery 
    Get-Help Get-BrokerSite 
    Get-Help Get-BrokerController 
    Get-Help Get-BrokerDBConnection 
    Get-Help Get-BrokerDBSchema 
    Get-Help Get-BrokerDBVersionChangeScript 
    Get-Help Get-BrokerInstalledDbVersion 
    Get-Help Get-BrokerServiceInstance 
    Get-Help Reset-BrokerServiceGroupMembership 
    Get-Help Update-BrokerNameCache
</pre></div>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../about_Broker_AssignmentPolicy/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../about_Broker_ConfigurationSlots/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
