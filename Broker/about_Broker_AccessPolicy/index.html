<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>about_Broker_AccessPolicy - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "about_Broker_AccessPolicy";
    var mkdocs_page_input_path = "Broker/about_Broker_AccessPolicy.md";
    var mkdocs_page_url = "/Broker/about_Broker_AccessPolicy/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#topic">TOPIC</a></li>
        
    
        <li class="main "><a href="#short-description">SHORT DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#long-description">LONG DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#access-policy-rules">ACCESS POLICY RULES</a></li>
        
    
        <li class="main "><a href="#details-of-connection-filters">DETAILS OF CONNECTION FILTERS</a></li>
        
    
        <li class="main "><a href="#details-of-access-right-controls">DETAILS OF ACCESS RIGHT CONTROLS</a></li>
        
    
        <li class="main "><a href="#see-also">SEE ALSO</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Broker &raquo;</li>
        
      
    
    <li>about_Broker_AccessPolicy</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# about_Broker_AccessPolicy</p>
<h2 id="topic"><a class="toclink" href="#topic">TOPIC</a></h2>
<div class="codehilite"><pre><span></span>Citrix Broker SDK - Access Policy
</pre></div>


<h2 id="short-description"><a class="toclink" href="#short-description">SHORT DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>Controls client-connection-based access to desktop groups.
</pre></div>


<h2 id="long-description"><a class="toclink" href="#long-description">LONG DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>The site&#39;s access policy defines rules controlling a user&#39;s access to 
desktop groups. Access checks are based on details of the user&#39;s connection 
from their user device to the site. Think of the access policy informally 
as a connection-based firewall.

The access policy comprises a set of rules. Each rule:

o   Relates to a single desktop group. 
o   Contains a set of connection filters and access right controls.

Multiple rules can apply to the same desktop group.

By default, users have no access to any desktop group within a site. A user 
gains access to a group when their connection&#39;s details match the connection 
filters of one or more rules in the access policy.

The access policy also grants control rights over desktop and application 
sessions. For example, it can specify which protocols are allowed for a 
connection from a given endpoint, and whether the user can restart their 
machine.

To use a resource published by a site, the user must have both access to the 
desktop group that contains it, and an entitlement to use the resource. 
Entitlements are typically granted by the site entitlement and assignment 
policies; see about_Broker_Policies for more information.
</pre></div>


<h2 id="access-policy-rules"><a class="toclink" href="#access-policy-rules">ACCESS POLICY RULES</a></h2>
<div class="codehilite"><pre><span></span>A single access policy rule relates to a single specified desktop group and 
comprises a set of connection filters and access right grants as described 
below.

Each rule can be individually enabled or disabled. A disabled rule is 
ignored when the access policy is evaluated.
</pre></div>


<p>CONNECTION FILTERS OVERVIEW 
    The connection filters in an access policy rule comprise the following: </p>
<div class="codehilite"><pre><span></span>o   Local/remote client (SmartAccess) filters 
o   Client IP address filters 
o   Client name filters 
o   User filters

All filters have an include and exclude form that can be individually 
enabled or disabled. For a rule to be considered when the access policy is 
evaluated, at least one connection include filter must be enabled. By 
default, all filters, both include and exclude, are disabled.

The detailed behavior of connection filters is covered later.
</pre></div>


<p>ACCESS RIGHT CONTROLS OVERVIEW 
    The access right controls in an access policy rule comprise the following: </p>
<div class="codehilite"><pre><span></span>o   Allowed protocols 
o   Whether machine restart, or programmatic session logoff, is allowed

The detailed behavior of access right controls is covered later.
</pre></div>


<h2 id="details-of-connection-filters"><a class="toclink" href="#details-of-connection-filters">DETAILS OF CONNECTION FILTERS</a></h2>
<div class="codehilite"><pre><span></span>To gain access to a desktop group the user&#39;s connection must match the 
filter criteria of at least one access policy rule for that group.

To match a rule, a connection must match all the rule&#39;s enabled include 
connection filters and must not match any of the rule&#39;s enabled exclude 
filters. That is, entries in exclude filters take priority.

Because all rules are evaluated independently, if an exclude filter match 
prevents a connection gaining access to a desktop group through one rule, 
the connection may still gain access to the same group through a different 
rule.

The filters are described in pairs below, but within a single rule a match 
against any exclude filter prevents a connection from gaining access through 
that rule irrespective of which include filters within the rule were also 
matched.
</pre></div>


<p>SMARTACCESS FILTERS 
    SmartAccess filters allow filtering based on whether the client is directly 
    connected (for example over a local area network (LAN)) or through Access 
    Gateway. For connections through Access Gateway further filtering can be 
    performed based on the tags supplied from Access Gateway itself. The key 
    properties of SmartAccess filters are: </p>
<div class="codehilite"><pre><span></span>o   AllowedConnections (include filter: Filtered, NotViaAG, ViaAG)

    This property controls the behavior of the include filter. The default 
    value is Filtered. The possible values are as follows:

    -- Filtered (default)

        The filter matches any user connection not through Access Gateway. 
        In addition, the filter may match user connections through Access 
        Gateway subject to the following: if the IncludedSmartAccessTags 
        property is empty, any such connection matches. However, if the 
        property is not empty at least one SmartAccess tag from the filter 
        property must match a SmartAccess tag supplied with the user&#39;s 
        connection.

    -- NotViaAG

        The filter matches only user connections not through Access 
        Gateway. The contents of the IncludedSmartAccessTags property 
        are ignored.

    -- ViaAG

        The filter matches only user connections through Access Gateway. 
        If the IncludedSmartAccessTags property is empty, any such 
        connection matches. However, if the property is not empty at 
        least one SmartAccess tag from the filter property must match a 
        SmartAccess tag supplied with the user&#39;s connection.

    -- AnyViaAG

        The filter matches only user connections through Access Gateway. 
        The contents of the IncludedSmartAccessTags property are ignored. 
        The behaviour of AnyViaAG is therefore the same as using ViaAG with 
        an empty IncludedSmartAccessTags property.

    The IncludedSmartAccessTags property referred to above forms part of the 
    include filter and is used if AllowedConnections is set to Filtered or 
    ViaAG. It comprises a simple list of Access Gateway tags that are 
    matched against those provided in the user&#39;s connection details.

o   ExcludedSmartAccessTags (exclude filter)

    A simple list of Access Gateway tags that are matched against those 
    provided in the user&#39;s connection details. If any tag in the list 
    matches one supplied with the user&#39;s connection, the user&#39;s connection 
    does not match the access policy rule containing the filter.

    The exclude filter has no setting corresponding to the 
    AllowedConnections property so its behavior is determined only by the 
    ExcludedSmartAccessTags property.

SmartAccess filters are typically used to control local (through a LAN) and 
remote (through Access Gateway) access to a site. A common model is to 
define two access policy rules rules for a group, one for local access and 
one for remote. The remote rule might impose restrictions on the user device 
having appropriate antivirus software installed, and potentially exclude 
certain user groups who would be allowed access over the corporate LAN 
(see USER FILTERS below).
</pre></div>


<p>CLIENT IP FILTERS 
    Client IP filters allow filtering based on the IP address of the user's 
    device. The key properties of client IP filters are: </p>
<div class="codehilite"><pre><span></span>o   IncludedClientIPs (include filter)

    A simple list of numeric IP address ranges that are matched against the 
    user device. The filter matches if the device address falls within any 
    of the ranges in the list.

o   ExcludedClientIPs (exclude filter)

    A simple list of numeric IP address ranges that are matched against the 
    user device. If any entry matches the device address, the user&#39;s 
    connection does not match the access policy rule containing the filter.

An IP address range in these filters can be specified as a simple IP 
address or as a range using a conventional subnet mask.
</pre></div>


<p>CLIENT NAME FILTERS 
    Client name filters allow filtering based on the name of the user's 
    device. The key properties of client name filters are: </p>
<div class="codehilite"><pre><span></span>o   IncludedClientNames (include filter)

    A simple list of names that are matched against the user device. The 
    filter matches if the device name matches any value in the list.

o   ExcludedClientNames (exclude filter)

    A simple list of device names that are matched against the user device. 
    If any entry matches the device name, the user&#39;s connection does not 
    match the access policy rule containing the filter.

Note: The form of the device name presented to the site depends on the site 
configuration. For example, by default in these filters you cannot use the 
form of the name presented by Web Interface.
</pre></div>


<p>USER FILTERS 
    User filters allow filtering based on the identity of the user. The key 
    properties of user filters are: </p>
<div class="codehilite"><pre><span></span>o   AllowedUsers (include filter: Filtered, AnyAuthenticated, Any)

    This property controls the behavior of the include filter. The default 
    value is Filtered. The possible values are as follows:

    -- Filtered (default)

        The filter matches if the user&#39;s logon token contains one or more 
        users or user groups matching those specified in the IncludedUsers 
        property. The IncludedUsers property is a simple list of users or 
        user groups and is used only when the AllowedUsers property is set 
        to Filtered.

    -- AnyAuthenticated

        The filter matches any authenticated Microsoft Windows user. The 
        contents of the IncludedUsers property are ignored.

    -- Any

        The filter matches any user. The contents of the IncludedUsers 
        property are ignored. In the current implementation this value 
        is handled in the same way as AnyAuthenticated.

o   ExcludedUsers (exclude filter)

    A simple list of users or user groups. If any entry matches one in the 
    user&#39;s logon token, the user&#39;s connection does not match the access 
    policy rule containing the filter.

    The exclude filter has no setting corresponding to the AllowedUsers 
    property so its behavior is determined only by the ExcludedUsers 
    property.
</pre></div>


<h2 id="details-of-access-right-controls"><a class="toclink" href="#details-of-access-right-controls">DETAILS OF ACCESS RIGHT CONTROLS</a></h2>
<div class="codehilite"><pre><span></span>The access right controls of an access policy rule determine rights that the 
user has over any desktop or application session that they obtain from the 
rule&#39;s desktop group.

The rights apply only if the user&#39;s connection matches the connection 
filters of a rule, and only if the user also has an entitlement to a desktop 
or application session from the associated desktop group.

The following properties define the access rights:

o   AllowedProtocols

    A simple list of communication protocols over which connections can be 
    made to resources published by the desktop group. For example, use this 
    to restrict protocols with high bandwidth requirements to connections 
    originating from a LAN.

o   AllowRestart

    For single-session power-managed machines, allows the user to restart 
    the machine (the machine is powered off using the capabilities of its 
    hypervisor). For multi-session machines the user&#39;s session is simply 
    logged off.

For a given connection, if multiple rules result in access being granted to 
a session from a desktop group, the user&#39;s rights are the combined rights of 
all the rules that matched for that group. The allowed protocol lists from 
all the rules are combined, and the user is granted restart rights if any 
one rule has AllowRestart set.
</pre></div>


<h2 id="see-also"><a class="toclink" href="#see-also">SEE ALSO</a></h2>
<div class="codehilite"><pre><span></span>about_Broker_Policies 
about_Broker_AssignmentPolicy 
about_Broker_EntitlementPolicy 
New-BrokerAccessPolicyRule 
Get-BrokerAccessPolicyRule 
Set-BrokerAccessPolicyRule 
Rename-BrokerAccessPolicyRule 
Remove-BrokerAccessPolicyRule 
New-BrokerAssignmentPolicyRule 
New-BrokerEntitlementPolicyRule 
New-BrokerAppAssignmentPolicyRule 
New-BrokerAppEntitlementPolicyRule 
Add-BrokerUser
</pre></div>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../../AppLibrary/Unlock-AppLibAppDisk/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../about_Broker_Applications/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
