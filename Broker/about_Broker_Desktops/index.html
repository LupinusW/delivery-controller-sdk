<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>about_Broker_Desktops - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "about_Broker_Desktops";
    var mkdocs_page_input_path = "Broker/about_Broker_Desktops.md";
    var mkdocs_page_url = "/Broker/about_Broker_Desktops/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#topic">TOPIC</a></li>
        
    
        <li class="main "><a href="#short-description">SHORT DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#long-description">LONG DESCRIPTION</a></li>
        
    
        <li class="main "><a href="#desktop-configuration">DESKTOP CONFIGURATION</a></li>
        
    
        <li class="main "><a href="#desktop-status">DESKTOP STATUS</a></li>
        
    
        <li class="main "><a href="#desktop-usage">DESKTOP USAGE</a></li>
        
    
        <li class="main "><a href="#desktop-conditions">DESKTOP CONDITIONS</a></li>
        
    
        <li class="main "><a href="#see-also">SEE ALSO</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Broker &raquo;</li>
        
      
    
    <li>about_Broker_Desktops</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# about_Broker_Desktops</p>
<h2 id="topic"><a class="toclink" href="#topic">TOPIC</a></h2>
<div class="codehilite"><pre><span></span>Citrix Broker SDK - Desktops
</pre></div>


<h2 id="short-description"><a class="toclink" href="#short-description">SHORT DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>Describes desktop concepts and usage.
</pre></div>


<h2 id="long-description"><a class="toclink" href="#long-description">LONG DESCRIPTION</a></h2>
<div class="codehilite"><pre><span></span>A desktop is a machine that is able to run a Microsoft Windows desktop 
environment (with a shell, icons and taskbar) or individual applications 
(seamlessly integrated with the local desktop). The configuration of the 
desktop determines whether it can run only desktop environments, only 
applications, or both desktops and applications. Machines running 
workstation operating systems are able to run one session at a time 
(single-session), whereas machines running server operating systems have 
the ability to run multiple simultaneous sessions (multi-session).

A key aspect of desktops is how they are assigned (or allocated) to users. 
Two allocation types are supported:

o   Random/Shared - A user is assigned a desktop at random from a pool of 
    shared desktops. Multi-session desktops are able to run sessions to 
    multiple users simultaneously, whereas single-session desktops can only 
    run one session at a time, and are returned to the pool when the user 
    logs off. Single-session shared desktops usually discard user data 
    stored on them after the user logs off. Multi-session shared desktops, 
    however, do not tend to discard user data after a log-off, as this is 
    only possible when the desktop is rebooted by a reboot schedule.

o   Permanent/Private - A private desktop is permanently assigned to a 
    specific user and data stored on it is retained across logons and 
    restarts. A private desktop can have users assigned explicitly or on 
    first use.
</pre></div>


<p>DESKTOP GROUPS 
    Desktops are collected together in desktop groups, and these provide 
    a flexible grouping mechanism that can be used to associate: </p>
<div class="codehilite"><pre><span></span>o   Desktops running on a particular type of machine 
o   Desktops with particular software installed 
o   Desktops for a set of users 
o   Desktops accessed in a similar way 
o   Desktops configured in a particular way 
o   Any combination of the above

Each desktop group can only contain one type of desktop, determined by its 
AllocationType and SessionSupport properties.

When assigning shared desktops or assign-on-first-use (AOFU) desktops to 
users, the set of candidates comes from available desktops in a particular 
desktop group.

You configure power management policy for single-session desktop groups, 
including peak and off-peak settings, for each desktop group. See 
about_Broker_PowerManagement for details.
</pre></div>


<p>CREATION OF DESKTOPS 
    Desktop objects are created automatically when a machine is added to a 
    desktop group. The type of desktop is determined by the AllocationType 
    property of the desktop group. </p>
<div class="codehilite"><pre><span></span>In order for a machine to be added from a catalog, the machine must be 
compatible with the desktop group. For this to be true, the catalog&#39;s 
AllocationType must be compatible, and the SessionSupport property must 
match.

Note: Because the session support and functional level of the machine are 
determined by the software on the machine (operating system and Citrix VDA, 
respectively), the SessionSupport and MinimalFunctionalLevel of the catalog 
and desktop group may match, but not be compatible with the machine. In this 
case any attempt of registration by the machine will fail.

You can add machines explicitly using the Add-BrokerMachine cmdlet, or a 
number of free machines can be acquired from a catalog using the 
Add-BrokerMachinesToDesktopGroup cmdlet. A machine can only be associated 
with one desktop group at a time, and has a DesktopUid property that 
references the corresponding desktop object. You can also associate desktops 
to machines with their SID properties.

Desktop objects are deleted when the machine is removed from the desktop 
group (using the Remove-BrokerMachine cmdlet). Desktops are also deleted 
when the desktop group containing them is deleted (using the 
Remove-BrokerDesktopGroup cmdlet). A desktop cannot be removed from a 
catalog while it is in a desktop group.
</pre></div>


<p>SHARED (RANDOM) DESKTOPS 
    Shared desktops are published to users using entitlement policy rules. Each 
    entitlement rule allows access to a single session on a desktop machine, 
    selected at random from the available desktops in a desktop group (with a 
    preference for desktops that are powered on). If there are no available 
    desktops, launching the session fails. See about_Broker_EntitlementPolicy 
    and about_Broker_PowerManagement for details. </p>
<p>PRIVATE (STATIC) DESKTOPS 
    You can assign private desktops to users explicitly or automatically, with 
    the AOFU feature. It is also possible to assign private desktops to 
    particular clients (through IP or client name). </p>
<div class="codehilite"><pre><span></span>You explicitly assign machines or desktops to users with the Add-BrokerUser 
cmdlet. Machines can be assigned to users before the machine has been added 
to the desktop group (desktop created), but otherwise the effect is the 
same.

With Add-BrokerUser you can assign a desktop to multiple users or user 
groups. If the desktop has single-session support then the desktop will be 
visible to multiple users, but only one user can log on to the desktop at 
any time.

Assignment policy rules allow you to use AOFU to assign desktops to users in 
a desktop group. When a user specified in an assignment policy rule launches 
a session, and if the user does not already have an assigned desktop, the 
broker selects an available desktop at random from the desktop group and 
permanently assigns it to that user. Once assigned in this way, the desktop 
behaves as though the assignment was made explicitly by an administrator. 
See about_Broker_AssignmentPolicy for details.

It is possible to assign more than one desktop to a user. You can achieve 
this by explicit assignment, multiple assignment policy rules, or the 
MaxDesktops property of an assignment policy rule.
</pre></div>


<h2 id="desktop-configuration"><a class="toclink" href="#desktop-configuration">DESKTOP CONFIGURATION</a></h2>
<div class="codehilite"><pre><span></span>When presented to the user, desktops are identified by: 
o   An icon (IconUid property) 
o   A name (PublishedName property) 
o   A description (Description property)

When starting the session, you can configure two connection settings: 
o   The color depth used at the start of the session (ColorDepth property) 
o   Whether SecureICA encryption is required (SecureIcaRequired property)

Each desktop group provides default values for these settings, but you can 
override them if the desktop has more specific settings (PrivateDesktop), or 
use an entitlement policy rule with more specific settings (SharedDesktop).

AOFU desktops can inherit these settings from the assignment policy rule 
when the assignment to the user takes place.
</pre></div>


<p>MAINTENANCE MODE 
    There are times when it is necessary to disable desktops. You can do this 
    by setting the InMaintenanceMode property of a desktop to $true. This puts 
    it into maintenance mode. The broker excludes single-session desktops in 
    maintenance mode from brokering decisions and does not start new sessions on 
    them. Existing sessions are unaffected. For multi-session desktops in 
    maintenance mode, reconnections to existing sessions are allowed, but no new 
    sessions are created on the machine. </p>
<div class="codehilite"><pre><span></span>Desktops in maintenance mode are also excluded from automatic power 
management, although explicit power actions are still performed.

Note that disabling desktop groups, entitlement policy rules, assignment 
policy rules, or applications are other ways of disabling aspects of 
brokering.
</pre></div>


<h2 id="desktop-status"><a class="toclink" href="#desktop-status">DESKTOP STATUS</a></h2>
<div class="codehilite"><pre><span></span>Once desktops are created, you can query the configuration and state 
information for different kinds of desktop, or retrieve more information 
about desktops using the Get-BrokerMachine cmdlet. To get details of any 
sessions running on the desktops, use the Get-BrokerSession cmdlet.

You can also group desktops by a specific property, counting the number of 
desktops with each value using the Group-BrokerMachine cmdlet. This can 
provide useful summary statistics.
</pre></div>


<h2 id="desktop-usage"><a class="toclink" href="#desktop-usage">DESKTOP USAGE</a></h2>
<div class="codehilite"><pre><span></span>Every hour the broker records how many desktops from each desktop group 
are in use, and the Get-BrokerDesktopUsage cmdlet returns this information. 
Analyze historical usage records to understand desktop usage patterns and 
help with the choice of idle pool and buffer settings.
</pre></div>


<h2 id="desktop-conditions"><a class="toclink" href="#desktop-conditions">DESKTOP CONDITIONS</a></h2>
<div class="codehilite"><pre><span></span>CPU usage, ICA latency, and profile logon times of desktops are monitored. 
When one of these values exceeds a threshold (configured by policy), the 
condition is flagged in the DesktopConditions property of the desktop. When 
the value drops below the threshold again, the condition is cleared. Use 
Get-BrokerMachine or Group-BrokerMachines cmdlets to query this information.
</pre></div>


<h2 id="see-also"><a class="toclink" href="#see-also">SEE ALSO</a></h2>
<div class="codehilite"><pre><span></span>about_Broker_Concepts 
about_Broker_Applications 
about_Broker_EntitlementPolicy 
about_Broker_AssignmentPolicy 
Add-BrokerMachine 
Add-BrokerMachinesToDesktopGroup 
Remove-BrokerMachine 
Add-BrokerUser 
Set-BrokerMachine 
Set-BrokerPrivateDesktop 
Get-BrokerMachine 
Group-BrokerMachine 
Get-BrokerDesktopUsage
</pre></div>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../about_Broker_ControllerDiscovery/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../about_Broker_EntitlementPolicy/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
