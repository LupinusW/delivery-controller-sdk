<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Set-ConfigDBConnection - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Set-ConfigDBConnection";
    var mkdocs_page_input_path = "CentralConfig/Set-ConfigDBConnection.md";
    var mkdocs_page_url = "/CentralConfig/Set-ConfigDBConnection/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#syntax">Syntax</a></li>
        
    
        <li class="main "><a href="#detailed-description">Detailed Description</a></li>
        
    
        <li class="main "><a href="#related-commands">Related Commands</a></li>
        
    
        <li class="main "><a href="#parameters">Parameters</a></li>
        
    
        <li class="main "><a href="#input-type">Input Type</a></li>
        
            <li><a href="#none">None</a></li>
        
    
        <li class="main "><a href="#return-values">Return Values</a></li>
        
            <li><a href="#citrixfmasdkutilitiesserviceservicestatusinfo">Citrix.Fma.Sdk.Utilities.Service.ServiceStatusInfo</a></li>
        
    
        <li class="main "><a href="#examples">Examples</a></li>
        
            <li><a href="#example-1">EXAMPLE 1</a></li>
        
            <li><a href="#example-2">EXAMPLE 2</a></li>
        
            <li><a href="#example-3">EXAMPLE 3</a></li>
        
            <li><a href="#example-4">EXAMPLE 4</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>CentralConfig &raquo;</li>
        
      
    
    <li>Set-ConfigDBConnection</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# Set-ConfigDBConnection</p>
<p>Configures a database connection for the Configuration Service.</p>
<h2 id="syntax"><a class="toclink" href="#syntax">Syntax</a></h2>
<div class="codehilite"><pre><span></span>Set-ConfigDBConnection [-DBConnection] &lt;String&gt; [-Force] [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]
</pre></div>


<h2 id="detailed-description"><a class="toclink" href="#detailed-description">Detailed Description</a></h2>
<p>Specifies the database connection string for use by the currently selected Citrix Configuration Service instance.</p>
<p>The service records the connection string and attempts to contact the specified database. If the database cannot initially be contacted the service retries the connection at intervals until contact with the database is successfully established.</p>
<p>Is is not possible to set a new database connection string for the service if one is already recorded. The connection string must first be set to $null. This action causes the service to reset and return to its idle state, at which point a new connection string can be set.</p>
<p>When a database connection string is successfully set for the service, a status of OK is returned by the cmdlet. If the database connection string is set to $null, a DBUnconfigured status is returned.</p>
<p>A syntactically invalid connection string is not recorded.</p>
<p>Only use of Windows authentication within the connection string is supported; a connection string containing SQL authentication credentials is always rejected as invalid.</p>
<p>The current service instance is that on the local machine, or that explicitly specified by the last usage of the -AdminAddress parameter to a Configuration SDK cmdlet.</p>
<h2 id="related-commands"><a class="toclink" href="#related-commands">Related Commands</a></h2>
<ul>
<li><a href="../Get-ConfigServiceStatus.html">Get-ConfigServiceStatus</a></li>
<li><a href="../Get-ConfigDBConnection.html">Get-ConfigDBConnection</a></li>
<li><a href="../Test-ConfigDBConnection.html">Test-ConfigDBConnection</a></li>
</ul>
<h2 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required?</th>
<th>Pipeline Input</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DBConnection</td>
<td>Specifies the database connection string to be used by the Configuration Service.  Passing in $null will clear any existing database connection configured.</td>
<td>true</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>Force</td>
<td>If present, allows the local administrator to set the connection string to null when there are problems contacting the database or other services.</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>LoggingId</td>
<td>Specifies the identifier of the high-level operation this cmdlet call forms a part of. Citrix Studio and Director typically create high-level operations. PowerShell scripts can also wrap a series of cmdlet calls in a high-level operation by way of the Start-LogHighLevelOperation and Stop-LogHighLevelOperation cmdlets.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AdminAddress</td>
<td>Specifies the address of a XenDesktop controller the PowerShell snap-in will connect to. You can provide this as a host name or an IP address.</td>
<td>false</td>
<td>false</td>
<td>Localhost. Once a value is provided by any cmdlet, this value becomes the default.</td>
</tr>
</tbody>
</table>
<h2 id="input-type"><a class="toclink" href="#input-type">Input Type</a></h2>
<h3 id="none"><a class="toclink" href="#none">None</a></h3>
<p>You cannot pipe input into this cmdlet.</p>
<h2 id="return-values"><a class="toclink" href="#return-values">Return Values</a></h2>
<h3 id="citrixfmasdkutilitiesserviceservicestatusinfo"><a class="toclink" href="#citrixfmasdkutilitiesserviceservicestatusinfo">Citrix.Fma.Sdk.Utilities.Service.ServiceStatusInfo</a></h3>
<p>The Set-ConfigDBConnection cmdlet returns an object describing the status of the Configuration Service together with extra diagnostics information. Possible values are:<br>-- OK:<br>The Configuration Service instance is configured with a valid database and service schema. The service is operational.<br>-- DBUnconfigured:<br>No database connection string is set for the Configuration Service instance.<br>-- DBRejectedConnection:<br>The database rejected the logon attempt from the Configuration Service. This may be because the service attempted to log on with invalid credentials or because a database has not been installed in the specified location.<br>-- InvalidDBConfigured:<br>The specified database does not exist, is not visible to the Configuration Service instance, or the service's schema within the database is invalid.<br>-- DBNotFound:<br>The specified database could not be located with the configured connection string.<br>-- DBNewerVersionThanService:<br>The version of the Configuration Service currently in use is newer than, and incompatible with, the version of the Configuration Service schema on the database. Upgrade the Configuration Service to a more recent version.<br>-- DBOlderVersionThanService:<br>The version of the Configuration Service schema on the database is newer than, and incompatible with, the version of the Configuration Service currently in use. Upgrade the database schema to a more recent version.<br>-- DBVersionChangeInProgress:<br>A database schema upgrade is in progress.<br>-- PendingFailure:<br>Connectivity between the Configuration Service instance and the database has been lost. This may be a transitory network error, but may indicate a loss of connectivity that requires administrator intervention.<br>-- Failed:<br>Connectivity between the Configuration Service instance and the database has been lost for an extended period of time, or has failed due to a configuration problem. The service instance cannot operate while its connection to the database is unavailable.<br>-- Unknown:<br>The status of the Configuration Service cannot be determined.## Notes
   If the command fails, the following errors can be returned.<br>    Error Codes<br>    -----------<br>    InvalidDBConnectionString<br>        The database connection string has an invalid format.<br>    DatabaseConnectionDetailsAlreadyConfigured<br>        There was already a database connection configured. After a configuration is set, it can only be set to $null.<br>    PermissionDenied<br>        You do not have permission to execute this command.<br>    AuthorizationError<br>        There was a problem communicating with the Citrix Delegated Administration Service.<br>    ConfigurationLoggingError<br>        The operation could not be performed because of a configuration logging error.<br>    CommunicationError<br>        There was a problem communicating with the remote service.<br>    ExceptionThrown<br>        An unexpected error occurred.  For more details, see the Windows event logs on the controller or the XenDesktop logs.</p>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<h3 id="example-1"><a class="toclink" href="#example-1">EXAMPLE 1</a></h3>
<div class="codehilite"><pre><span></span><span class="nt">C</span><span class="o">:</span><span class="err">\</span><span class="nt">PS</span><span class="o">&gt;</span><span class="nt">Set-ConfigDBConnection</span> <span class="s2">&quot;Server=dbserver\SQLEXPRESS;Database=XDDB;Trusted_Connection=True&quot;</span>
</pre></div>


<p>Description<br>-----------<br>Configures the service instance to use a database called XDDB on an SQL Server Express database running on the machine called dbserver. Integrated Windows authentication is required.</p>
<h3 id="example-2"><a class="toclink" href="#example-2">EXAMPLE 2</a></h3>
<div class="codehilite"><pre><span></span><span class="x">C:\PS&gt;Set-ConfigDBConnection -DBConnection </span><span class="p">$</span><span class="nv">null</span><span class="x"></span>
</pre></div>


<p>Description<br>-----------<br>Resets the service instance's database connection string. The service instance resets and returns to an idle state until a valid new database connection string is specified.</p>
<h3 id="example-3"><a class="toclink" href="#example-3">EXAMPLE 3</a></h3>
<div class="codehilite"><pre><span></span><span class="nt">c</span><span class="o">:</span><span class="err">\</span><span class="nt">PS</span><span class="o">&gt;</span><span class="nt">Set-ConfigDBConnection</span> <span class="nt">-DBConnection</span> <span class="s2">&quot;Server=serverName\SQLEXPRESS;Initial Catalog = databaseName;  Integrated Security = True&quot;</span>
          <span class="nt">OK</span>
</pre></div>


<p>Description<br>-----------<br>Configures a database connection string for the Configuration Service.</p>
<h3 id="example-4"><a class="toclink" href="#example-4">EXAMPLE 4</a></h3>
<div class="codehilite"><pre><span></span>c:\PS&gt;Set-ConfigDBConnection -DBConnection &quot;Invalid Connection String&quot;

          Invalid database connection string format.
</pre></div>


<p>Description<br>-----------<br>Configures an invalid database connection string for the Configuration Service.</p>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../Reset-ConfigServiceGroupMembership/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../Set-ConfigEdgeServer/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
