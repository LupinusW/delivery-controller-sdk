<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Get-ProvSchemeMasterVMImageHistory - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Get-ProvSchemeMasterVMImageHistory";
    var mkdocs_page_input_path = "MachineCreation/Get-ProvSchemeMasterVMImageHistory.md";
    var mkdocs_page_url = "/MachineCreation/Get-ProvSchemeMasterVMImageHistory/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#syntax">Syntax</a></li>
        
    
        <li class="main "><a href="#detailed-description">Detailed Description</a></li>
        
    
        <li class="main "><a href="#related-commands">Related Commands</a></li>
        
    
        <li class="main "><a href="#parameters">Parameters</a></li>
        
    
        <li class="main "><a href="#input-type">Input Type</a></li>
        
    
        <li class="main "><a href="#return-values">Return Values</a></li>
        
            <li><a href="#citrixmachinecreationsdkvmimage-this-object-represents-a-master-vm-history-it-contains-the-following-parameters-vmimagehistoryuid-the-unique-identifier-for-the-history-item-provisioningschemeuid-the-unique-identifier-for-the-provisioning-scheme-that-the-vm-was-used-for-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-vm-was-used-for-masterimagevm-the-path-to-the-snapshot-item-that-was-used-as-the-master-vm-image-date-the-date-and-time-that-the-vm-or-snapshot-was-used-in-the-provisioning-scheme-imagestatus-the-status-of-the-provisioning-scheme-image-masterimageid-the-unique-identifier-for-the-snapshot-as-assigned-by-the-hosting-unit-functionallevel-the-functionallevel-of-the-vda-installed-on-the-vm">Citrix.MachineCreation.Sdk.VMImage    This object represents a master VM history. It contains the following parameters:    VMImageHistoryUid         The unique identifier for the History item.    ProvisioningSchemeUid         The unique identifier for the provisioning scheme that the VM was used for.    ProvisioningSchemeName         The name of the provisioning scheme that the VM was used for.    MasterImageVM         The path to the Snapshot item that was used as the master VM image.    Date         The date and time that the VM or snapshot was used in the provisioning scheme.    ImageStatus         The status of the provisioning scheme image.    MasterImageId         The unique identifier for the snapshot, as assigned by the hosting unit.    FunctionalLevel         The FunctionalLevel of the VDA installed on the VM.</a></li>
        
    
        <li class="main "><a href="#examples">Examples</a></li>
        
            <li><a href="#example-1">EXAMPLE 1</a></li>
        
            <li><a href="#example-2">EXAMPLE 2</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>MachineCreation &raquo;</li>
        
      
    
    <li>Get-ProvSchemeMasterVMImageHistory</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# Get-ProvSchemeMasterVMImageHistory</p>
<p>Gets the list of master VM snapshots that have been used to provide hard disks to provisioning schemes.</p>
<h2 id="syntax"><a class="toclink" href="#syntax">Syntax</a></h2>
<div class="codehilite"><pre><span></span>Get-ProvSchemeMasterVMImageHistory [-ProvisioningSchemeName &lt;String&gt;] [-ProvisioningSchemeUid &lt;Guid&gt;] [-MasterImageVM &lt;String&gt;] [-VMImageHistoryUid &lt;Guid&gt;] [-ImageStatus &lt;String&gt;] [-ShowAll] [-ReturnTotalRecordCount] [-MaxRecordCount &lt;Int32&gt;] [-Skip &lt;Int32&gt;] [-SortBy &lt;String&gt;] [-Filter &lt;String&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]
</pre></div>


<h2 id="detailed-description"><a class="toclink" href="#detailed-description">Detailed Description</a></h2>
<p>Provides the ability to discover the master VM snapshots used to provide the hard disk image for provisioning schemes.  This information includes the date and time when the image was introduced.</p>
<p>By default, this cmdlet returns only those snapshots that have been used previously.  This information can be used to roll back a provisioning scheme to a previous image.</p>
<p>The ShowAll parameter may be supplied to also show the snapshot for the image currently in use, and the snapshots for any images prepared for later use.</p>
<h2 id="related-commands"><a class="toclink" href="#related-commands">Related Commands</a></h2>
<ul>
<li><a href="../Publish-ProvMasterVMImage.html">Publish-ProvMasterVMImage</a></li>
<li><a href="../Remove-ProvSchemeMasterVMImageHistory.html">Remove-ProvSchemeMasterVMImageHistory</a></li>
</ul>
<h2 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required?</th>
<th>Pipeline Input</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ProvisioningSchemeName</td>
<td>The name of the provisioning scheme.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>ProvisioningSchemeUid</td>
<td>The unique identifier of the provisioning scheme.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>MasterImageVM</td>
<td>The path to the snapshot item in the hosting unit PowerShell provider.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>VMImageHistoryUid</td>
<td>The unique identifier for the Image History item.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>ImageStatus</td>
<td>The status of the provisioning scheme image.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>ShowAll</td>
<td>Show all images. This includes images currently in use, and images prepared for later use.</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>ReturnTotalRecordCount</td>
<td>See about_Prov_Filtering for details.</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>MaxRecordCount</td>
<td>See about_Prov_Filtering for details.</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>Skip</td>
<td>See about_Prov_Filtering for details.</td>
<td>false</td>
<td>false</td>
<td>0</td>
</tr>
<tr>
<td>SortBy</td>
<td>See about_Prov_Filtering for details.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>Filter</td>
<td>See about_Prov_Filtering for details.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AdminAddress</td>
<td>Specifies the address of a XenDesktop controller that the PowerShell snap-in connects to.  You can provide this as a host name or an IP address.</td>
<td>false</td>
<td>false</td>
<td>LocalHost. When a value is provided by any cmdlet, this value becomes the default.</td>
</tr>
</tbody>
</table>
<h2 id="input-type"><a class="toclink" href="#input-type">Input Type</a></h2>
<h3 id="_1"><a class="toclink" href="#_1"></a></h3>
<h2 id="return-values"><a class="toclink" href="#return-values">Return Values</a></h2>
<h3 id="citrixmachinecreationsdkvmimage-this-object-represents-a-master-vm-history-it-contains-the-following-parameters-vmimagehistoryuid-the-unique-identifier-for-the-history-item-provisioningschemeuid-the-unique-identifier-for-the-provisioning-scheme-that-the-vm-was-used-for-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-vm-was-used-for-masterimagevm-the-path-to-the-snapshot-item-that-was-used-as-the-master-vm-image-date-the-date-and-time-that-the-vm-or-snapshot-was-used-in-the-provisioning-scheme-imagestatus-the-status-of-the-provisioning-scheme-image-masterimageid-the-unique-identifier-for-the-snapshot-as-assigned-by-the-hosting-unit-functionallevel-the-functionallevel-of-the-vda-installed-on-the-vm"><a class="toclink" href="#citrixmachinecreationsdkvmimage-this-object-represents-a-master-vm-history-it-contains-the-following-parameters-vmimagehistoryuid-the-unique-identifier-for-the-history-item-provisioningschemeuid-the-unique-identifier-for-the-provisioning-scheme-that-the-vm-was-used-for-provisioningschemename-the-name-of-the-provisioning-scheme-that-the-vm-was-used-for-masterimagevm-the-path-to-the-snapshot-item-that-was-used-as-the-master-vm-image-date-the-date-and-time-that-the-vm-or-snapshot-was-used-in-the-provisioning-scheme-imagestatus-the-status-of-the-provisioning-scheme-image-masterimageid-the-unique-identifier-for-the-snapshot-as-assigned-by-the-hosting-unit-functionallevel-the-functionallevel-of-the-vda-installed-on-the-vm">Citrix.MachineCreation.Sdk.VMImage<br>    This object represents a master VM history. It contains the following parameters:<br>    VMImageHistoryUid <Guid><br>        The unique identifier for the History item.<br>    ProvisioningSchemeUid <Guid><br>        The unique identifier for the provisioning scheme that the VM was used for.<br>    ProvisioningSchemeName <string><br>        The name of the provisioning scheme that the VM was used for.<br>    MasterImageVM <string><br>        The path to the Snapshot item that was used as the master VM image.<br>    Date <DateTime><br>        The date and time that the VM or snapshot was used in the provisioning scheme.<br>    ImageStatus <string><br>        The status of the provisioning scheme image.<br>    MasterImageId <string><br>        The unique identifier for the snapshot, as assigned by the hosting unit.<br>    FunctionalLevel <string><br>        The FunctionalLevel of the VDA installed on the VM.</a></h3>
<p>## Notes
   In the case of failure, the following errors can result.<br>    Error Codes<br>    -----------<br>    PartialData<br>    Only a subset of the available data was returned.<br>    PermissionDenied<br>    The user does not have administrative rights to perform this operation.<br>    ConfigurationLoggingError<br>    The operation could not be performed because of a configuration logging error.<br>    CouldNotQueryDatabase<br>    The query required to get the database was not defined.<br>    CommunicationError<br>    An error occurred while communicating with the service.<br>    DatabaseNotConfigured<br>    The operation could not be completed because the database for the service is not configured.<br>    InvalidFilter<br>    A filtering expression was supplied that could not be interpreted for this cmdlet.<br>    ExceptionThrown<br>    An unexpected error occurred.  To locate more details, see the Windows event logs on the controller being used or examine the XenDesktop logs.</p>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<h3 id="example-1"><a class="toclink" href="#example-1">EXAMPLE 1</a></h3>
<div class="codehilite"><pre><span></span>C:\PS&gt;Get-ProvSchemeMasterVMImageHistory


VMImageHistoryUid      : 3cba3a75-89cd-4868-989b-27feb378fec5
ProvisioningSchemeUid  : 7585f0de-192e-4847-a6d8-22713c3a2f42
ProvisioningSchemeName : MyScheme
MasterImageVM          : /Base.vm/base.snapshot
Date                   : 17/05/2010 09:27:50
</pre></div>


<p>Description<br>-----------<br>Gets all the hard disk images that have been used across all provisioning schemes.</p>
<h3 id="example-2"><a class="toclink" href="#example-2">EXAMPLE 2</a></h3>
<div class="codehilite"><pre><span></span>C:\PS&gt;Get-ProvSchemeMasterVMImageHistory -ProvisioningSchemeName MyScheme -masterImageVM &quot;/BaseXp.vm/update1.snapshot&quot; | Publish-ProvMasterVMImage
</pre></div>


<p>Description<br>-----------<br>Roll back the provisioning scheme to use the hard disk from the update1.snapshot for the provisioning scheme called "MyScheme".</p>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../Get-ProvScheme/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../Get-ProvScopedObject/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
