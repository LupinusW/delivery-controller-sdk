<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Test-OrchDBConnection - Citrix PowerShell SDK Documentation</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Test-OrchDBConnection";
    var mkdocs_page_input_path = "Orchestration/Test-OrchDBConnection.md";
    var mkdocs_page_url = "/Orchestration/Test-OrchDBConnection/";
  </script>
  
  <script src="../../js/jquery-1.10.2.min.js"></script>
  <script src="../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/base.js"></script>
  <script src="../../js/custom.js"></script>
  <script src="../../js/nav.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document" data-spy="scroll" data-target=".bs-sidebar">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="../..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs"
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
			<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#syntax">Syntax</a></li>
        
    
        <li class="main "><a href="#detailed-description">Detailed Description</a></li>
        
    
        <li class="main "><a href="#related-commands">Related Commands</a></li>
        
    
        <li class="main "><a href="#parameters">Parameters</a></li>
        
    
        <li class="main "><a href="#input-type">Input Type</a></li>
        
    
        <li class="main "><a href="#return-values">Return Values</a></li>
        
            <li><a href="#citrixfmasdkutilitiesserviceservicestatusinfo">Citrix.Fma.Sdk.Utilities.Service.ServiceStatusInfo</a></li>
        
    
        <li class="main "><a href="#examples">Examples</a></li>
        
            <li><a href="#example-1">EXAMPLE 1</a></li>
        
            <li><a href="#example-2">EXAMPLE 2</a></li>
        
    
    </ul>
</div>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Orchestration &raquo;</li>
        
      
    
    <li>Test-OrchDBConnection</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <p>ï»¿# Test-OrchDBConnection</p>
<p>Tests whether a database is suitable for use by the Citrix Orchestration Service.</p>
<h2 id="syntax"><a class="toclink" href="#syntax">Syntax</a></h2>
<div class="codehilite"><pre><span></span>Test-OrchDBConnection [-DBConnection] &lt;String&gt; [-LoggingId &lt;Guid&gt;] [-AdminAddress &lt;String&gt;] [&lt;CommonParameters&gt;]
</pre></div>


<h2 id="detailed-description"><a class="toclink" href="#detailed-description">Detailed Description</a></h2>
<p>Tests whether the database specified in the given connection string is suitable for use by the currently selected Citrix Orchestration Service instance.</p>
<p>The service attempts to contact the specified database and returns a status indicating whether the database is both contactable and usable. The test does not impact any currently established connection from the service instance to another database in any way. The tested connection string is not recorded.</p>
<p>Only use of Windows authentication within the connection string is supported; a connection string containing SQL authentication credentials is always rejected as invalid.</p>
<p>The current service instance is that on the local machine, or that explicitly specified by the last usage of the -AdminAddress parameter to a Orchestration SDK cmdlet.</p>
<h2 id="related-commands"><a class="toclink" href="#related-commands">Related Commands</a></h2>
<ul>
<li><a href="../Get-OrchServiceStatus.html">Get-OrchServiceStatus</a></li>
<li><a href="../Get-OrchDBConnection.html">Get-OrchDBConnection</a></li>
<li><a href="../Set-OrchDBConnection.html">Set-OrchDBConnection</a></li>
</ul>
<h2 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required?</th>
<th>Pipeline Input</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DBConnection</td>
<td>Specifies the database connection string to be tested by the currently selected Citrix Orchestration Service instance.</td>
<td>true</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>LoggingId</td>
<td>Specifies the identifier of the high-level operation this cmdlet call forms a part of. Citrix Studio and Director typically create high-level operations. PowerShell scripts can also wrap a series of cmdlet calls in a high-level operation by way of the Start-LogHighLevelOperation and Stop-LogHighLevelOperation cmdlets.</td>
<td>false</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>AdminAddress</td>
<td>Specifies the address of a XenDesktop controller the PowerShell snap-in will connect to. You can provide this as a host name or an IP address.</td>
<td>false</td>
<td>false</td>
<td>Localhost. Once a value is provided by any cmdlet, this value becomes the default.</td>
</tr>
</tbody>
</table>
<h2 id="input-type"><a class="toclink" href="#input-type">Input Type</a></h2>
<h3 id="_1"><a class="toclink" href="#_1"></a></h3>
<h2 id="return-values"><a class="toclink" href="#return-values">Return Values</a></h2>
<h3 id="citrixfmasdkutilitiesserviceservicestatusinfo"><a class="toclink" href="#citrixfmasdkutilitiesserviceservicestatusinfo">Citrix.Fma.Sdk.Utilities.Service.ServiceStatusInfo</a></h3>
<p>The Test-OrchDBConnection cmdlet returns an object of type ServiceStatusInfo describing the changes to the system that would result from using the specified connection string with the Set-OrchDBConnection cmdlet. The actual state of the system is not changed.<br>The returned ServiceStatusInfo object has two properties: ServiceStatus, which gives the status of the selected Orchestration Service instance that would result from adopting the connection string, and ExtraInfo, which is a dictionary providing extra diagnostics information for the database identified by the connection string.<br>Possible ServiceStatus values are:<br>-- OK:<br>The Set-OrchDBConnection command would succeed if it were executed with the supplied connection string.<br>-- DBUnconfigured:<br>No database connection string is set for the service instance.<br>-- DBRejectedConnection:<br>The database rejected the logon attempt from the Orchestration Service instance. This may be because the service attempted to log on with invalid credentials or because a database has not been installed in the specified location.<br>-- InvalidDBConfigured:<br>The specified database does not exist, is not visible to the Orchestration Service instance, or the service's schema within the database is invalid.<br>-- DBNotFound:<br>The specified database could not be located with the given connection string.<br>-- DBNewerVersionThanService:<br>The Orchestration Service instance is older than, and incompatible with, the service's schema in the database. The service instance needs upgrading.<br>-- DBOlderVersionThanService:<br>The Orchestration Service instance is newer than, and incompatible with, the service's schema in the database. The database schema needs upgrading.<br>-- DBVersionChangeInProgress:<br>A database schema upgrade is currently in progress.<br>-- PendingFailure:<br>Connectivity between the Orchestration Service instance and the database has been lost. This may be a transitory network error, but may indicate a loss of connectivity that requires administrator intervention.<br>-- Failed:<br>Connectivity between the Orchestration Service instance and the database has been lost for an extended period of time, or has failed due to a configuration problem. The service instance cannot operate while its connection to the database is unavailable.<br>-- Unknown:<br>Service status cannot be determined.<br>The ExtraInfo dictionary contains at least the following keys, and their associated string values:<br>-- Server.Version:<br>Database server version number.<br>-- Server.IsClustered:<br>"True" if the database server is clustered; "False" otherwise.<br>-- Database.Status:<br>Status of the database. When operating normally, the value is "Normal".<br>-- Database.RecoveryModel:<br>Recovery model of the database (e.g. "Simple").<br>-- Database.LastBackupDate:<br>Date of the last backup of this database.<br>-- Database.IsReadCommittedSnapshotOn:<br>"True" if the READ_COMMITTED_SNAPSHOT database option is enabled; "False" otherwise.<br>-- Database.Collation:<br>Collation order of the database (e.g. "Latin1_General_100_CI_AS_KS").<br>-- Database.IsMirroringEnabled:<br>"True" if the database is mirrored; "False" otherwise.<br>-- Database.AvailabilityGroupName:<br>The name of the availability group of which this database is a member.<br>Beware that the corresponding values are always strings. Therefore, to test Boolean values, you must use statements like<br>if ($info["Server.IsClustered"] == "True")<br>instead of just<br>if ($info["Server.IsClustered"])## Notes
   If the command fails, the following errors can be returned.<br>    Error Codes<br>    -----------<br>    InvalidDBConnectionString<br>        The database connection string has an invalid format.<br>    PermissionDenied<br>        You do not have permission to execute this command.<br>    AuthorizationError<br>        There was a problem communicating with the Citrix Delegated Administration Service.<br>    ConfigurationLoggingError<br>        The operation could not be performed because of a configuration logging error.<br>    CommunicationError<br>        There was a problem communicating with the remote service.<br>    ExceptionThrown<br>        An unexpected error occurred.  For more details, see the Windows event logs on the controller or the XenDesktop logs.</p>
<h2 id="examples"><a class="toclink" href="#examples">Examples</a></h2>
<h3 id="example-1"><a class="toclink" href="#example-1">EXAMPLE 1</a></h3>
<div class="codehilite"><pre><span></span><span class="nt">C</span><span class="o">:</span><span class="err">\</span><span class="nt">PS</span><span class="o">&gt;</span><span class="nt">Test-OrchDBConnection</span> <span class="s2">&quot;Server=dbserver\SQLEXPRESS;Database=XDDB;Trusted_Connection=True&quot;</span>
</pre></div>


<p>Description<br>-----------<br>Tests whether the service instance could use a database called XDDB on an SQL Server Express database running on the machine called dbserver. Integrated Windows authentication is required.</p>
<h3 id="example-2"><a class="toclink" href="#example-2">EXAMPLE 2</a></h3>
<div class="codehilite"><pre><span></span>c:\PS&gt;Test-OrchDBConnection -DBConnection &quot;Invalid Connection String&quot;

          Invalid database connection string format.
</pre></div>


<p>Description<br>-----------<br>Tests an invalid database connection string for the Orchestration Service.</p>
              

            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../Stop-OrchRestApi/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../../StorefrontService/about_Sf_Filtering/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
